 盟内角色邀请不需要对方审批，申请加入触发加入方事务审批切面。盟内角色卡片添加入口，角色权限中级以下触发添加盟内角色审批。涉及审批： 审批设置修改：审批设置修改：1.个人盟审批设置：“申请添加联系人” 说明：选择开则申请添加我为联系人需要审批2.事务审批设置“申请出入事务”说明：选择开则选定范围内以下场景需要审批。申请加入本事务本事务角色加入其他事务低权限者申请添加角色3.不需要“+添加”多个审批约束 设计图-web
个人盟首页添加联系人样式：https://lanhuapp.com/url/9Tjvl-My6HW
事务角色增加盟分组：https://lanhuapp.com/url/vjesN-KDr9H
审批更新（标注new的）：https://lanhuapp.com/url/DyrQT-3dB1h
设计图-移动端
个人盟：https://lanhuapp.com/url/dJpHx-LJWM3
事务角色：https://lanhuapp.com/url/LC7xd-qdcl4
审批更新：https://lanhuapp.com/url/bBMyL-tTdnh 总的方针：1. 个人和个人、个人和组织、组织和组织建立的关系为双向关系，取消为单向取消2. 建立的关系为盟级别，即个人盟和组织盟3. 如果为个人单向解除关系，个人发起会话或发起添加自动补全双向关系4. 和个人会话受联系人关系、陌生人会话设置约束，和组织角色可直接会话5. 单聊会话中对方为个人，且还不是对方联系人时，可直接通过会话入口成为对方的联系人6. 盟内保持单向联系迭代计划：1.组织的陌生人会话设置，目前不做设置，默认为开，即看见组织角色卡片即可进行会话2.双向关系的建立到盟还是事务依赖盟的模式（集团or独立模式）（二级分账or多级分账），目前版本双向关系都到盟3.单聊对象为组织角色时，可以有的操作为把对方添加到我的联系人、申请加入对方，目前暂不放出 盟A，子事务A1、A2盟B，子事务B1、B2个人X、个人Y一、个人找个人：1. 添加好友（X在个人通讯录搜索添加Y、X看到Y的角色卡片添加好友）【已实现】用户通过关键词搜索并添加好友，支持用户名、SuperID、邮箱、手机号找到匹配的用户；用户名为模糊搜索，SuperID、邮箱、手机号为精确搜索【已实现】用户选择系统推荐可能认识的人进行添加好友，包括：关注者通讯录联系人，仅移动端，需要用户开启手机通讯录权限且允许推荐通讯录联系人【已实现】当双方互不为好友时，一方发送添加好友申请，对方审批同意后，双方成为双向好友关系当双方为单向好友时，如X是Y好友，Y不是X好友时，X向Y发送添加好友申请或X向Y发起会话时，双方重新建立双向好友关系，不需要Y审批。2. 移除好友（X在个人通讯录移除Y）移除好友为单向移除X将好友Y移除，Y从X的当前联系人移至历史联系人中，X仍在Y的当前联系人中。3. 申请成为对方联系人（X在Y首页申请添加联系人=X申请成为Y的联系人）当X不是Y的联系人时，X在Y的个人主页可申请成为对方联系人，审批通过即X成为Y的好友。若Y当前也不是X的联系人，需要同时建立Y和X的双向关系。个人找个人会话梳理：1. 双向关系，即X和Y互为好友：正常会话2. 单向关系，即X是Y的好友，Y不是X的好友：X可以给Y发送会话，会话发出后，Y即成为X的好友，不需要审批。当X开启陌生人会话，Y给X发送会话成功，并提示Y“您还不是对方的联系人，申请添加联系人”当X关闭陌生人会话，Y给X发送会话失败，并提示“您还不是对方的联系人，申请添加联系人”3. 无关系，即X和Y互不为好友当X/Y开启陌生人会话时，对方发送会话成功，并提示“您还不是对方的联系人，申请添加联系人”当X/Y关闭陌生人会话时，对方发送会话失败，并提示“您还不是对方的联系人，申请添加联系人”二、个人找组织：1. 添加组织（联系人）（X在个人通讯录搜索添加A或A中的角色、X看到A的角色卡片添加为联系人）用户添加组织联系人后，建立用户与组织的双向关系用户添加组织联系人，可以搜到公开的盟和公开的事务角色（已经在联系人中的盟、角色不可选），搜索条件和搜索结果显示同添加盟外角色，详见添加盟外角色相关发布。选择盟添加时如果该用户X不是该根事务的盟外角色，需要根事务A处理审批，审批同意后可转发、抄送给盟内其他事务或角色，同时该盟和用户建立双向联系人关系。用户成为该根事务的盟外角色，该盟成为用户的组织联系人，同时审批者和其他被拉入的角色显示在该用户的通讯录中。如果该用户是该根事务的盟外角色，则不需要审批，该盟成为用户的组织联系人选择事务角色添加时如果该用户不是该角色所在事务的盟外角色，需要该角色所在事务处理审批，审批通过后，用户和该事务所在盟建立双向联系，用户成为该事务的盟外角色，审批者和该邀请角色显示在该用户的通讯录中。如果该用户是该角色所在事务的盟外角色，不需要审批。当该事务所在盟已经是该用户的组织联系人时，用户选中的事务角色显示在该用户的通讯录中即可。当事务所在盟还不是该用户的组织联系人时，用户和盟重新建立双向联系，被选择的事务角色显示在该用户的通讯录中2. 移除组织（X在个人通讯录中移除组织A）用户可以移除组织，移除为单向移除移除组织即移除该盟和盟中的角色，用户X将盟A移除，X还在A中某些事务的盟外角色中，但A盟和A盟中的角色从当前联系人中移至历史联系人中3. 移除组织联系人用户可以移除组织联系人，仅将该组织角色从当前联系人移至历史联系人中，不影响组织和该用户建立的联系4. 申请加入（X在A或A1首页申请加入）当用户不在该事务的盟外角色时，可以申请加入事务。事务审批同意以后，若该事务所在盟已经在用户的通讯录中，仅需要将X加为事务的盟外角色若该事务所在盟还不在用户的通讯录中，需要建立用户与盟的双向关系，该事务所在盟显示在用户的通讯录中，不需要带入事务中的角色。个人找组织角色会话梳理：个人可以向组织角色正常发起会话。当个人X是事务A1的盟外角色，但A1所在盟A不在X的通讯录中时，X找A1下的角色发起会话时，需要自动补全用户X和盟A的双向关系，即将A重新显示在X的通讯录中，并将X会话的角色也显示在该盟下当个人X和盟A当前存在双向关系，X找盟A中的角色发生会话时，该角色如果还不在X的通讯录中，需要加入X的通讯录中三、组织找个人：1. 添加盟外个人（A1在添加盟外角色时选择个人X）事务在添加盟外角色时选择个人添加当该事务所在盟已经在个人通讯录时，不需要个人审批，添加后个人即加入该事务的盟外角色中当该事务所在盟还不在个人通讯录时，需要个人审批，审批同意后，个人加入事务的盟外角色，该事务所在盟加入个人的通讯录2. 添加盟外个人（A1的角色看到X的个人卡片）当组织角色直接通过个人卡片发起添加联系人时若该角色权限为中级及以上时，同1若该角色权限为普通及以下时，需要先进行A1的邀请加入本事务审批【new】，然后同13. 移除盟外个人事务移除盟外角色中的个人时，仅为单向移除，不影响该事务所在盟和个人建立的联系4. 申请加为联系人（A1的角色到X首页申请添加为联系人=角色申请成为个人X的联系人）当该事务角色a1还不在个人的通讯录中时，可以申请加为联系人（双向）当该角色所在盟已经和个人建立双向联系时，即A在X的通讯录中时，X也在a1所在事务A1中，不需要任何审批即可添加成功，角色a1加入个人的组织联系人（单向补全）当A在X的通讯录中，X不在A1的盟外角色中时，若a1角色权限为普通及以下，需要先进行A1的邀请加入本事务审批【new】，该审批通过后，不需要X审批，a1加入到X的组织联系人中，X加入事务A1的盟外角色。若a1角色权限为中级及以上，不需要任何审批，结果同上。（单向审批）当A不在X的通讯录中，X在A1的盟外角色中时。需要个人X审批，审批同意后，个人和盟补全双向关系。个人加入角色所在事务的盟外角色，该角色和其所在盟显示在个人的通讯录中（毫无关系）A不在X的通讯录中，X也不在A1的通讯录中时若a1角色权限为普通及以下，先进行A1的邀请加入本事务审批【new】，审批通过后X进行添加联系人审批，通过后个人和盟建立双向关系。即A和a1加入到X的组织联系人中，X加入到a1所在事务A1的盟外角色中若a1角色权限为中级及以上，直接X处理添加联系人审批，通过后个人和盟建立双向关系。即A和a1加入到X的组织联系人中，X加入到a1所在事务A1的盟外角色中组织角色找个人会话梳理：1. 该角色a1所在盟A已经和个人X建立联系，即A在X的通讯录中，a1可以和X发起会话如果a1不在X的通讯录，需要将a1加入X的通讯录中2. 该角色a1所在盟A还没有和个人X建立联系，即A不在X的通讯录中，当X开启陌生人会话时，a1给X发送会话成功，并提示“您还不是对方的联系人，申请添加联系人”当X关闭陌生人会话时，a1给X发送会话失败，并提示“您还不是对方的联系人，申请添加联系人”申请添加联系，同“4.申请加为联系人”的单向审批、毫无关系的情况组织和组织：1. 添加盟外角色（在A中搜索添加B或B中的角色）事务A1添加组织B（角色b1）后，建立事务A1与盟B的双向关系添加盟外角色，可以搜到公开的盟和公开的事务角色选择盟B添加时如果该事务A1所在盟A已经在盟B的盟外角色时，即A在B的盟外角色中，不需要B事务审批即可将B加入A1的盟外角色中如果A还不在B的盟外角色建立联系，此时需要B事务审批，审批通过则建立A1和B的双向关系。A加入B的盟外角色，B加入A1的盟外角色。B事务的审批者及其他转发抄送的角色也加入A1的盟外角色选择角色b1添加时（双向）如果角色b1所属盟B已经在A1的盟外角色中，A1所属盟A也在B1的盟外角色时，不需要任何审批，b1加入A1的盟外角色（单向-恢复）如果角色b1所属盟B不在A1的盟外角色中，但A1所属盟A在B1的盟外角色中，不需要审批，自动建立b1所属盟B与当前事务的双向关系，同时将b1加入A1的盟外角色中。（单向-审批）如果角色b1所属盟B在A1的盟外角色中，但A1所属盟A不在B1的盟外角色中，需要审批，b1所属事务审批后，补全b1所属盟B与当前事务的双向关系，同时将审批者和转发抄送的角色加入A1的盟外角色（毫无关系）如果b1所属盟B不在A1的盟外角色中，A1所属盟A不在B1的盟外角色中，需要审批，b1所属事务审批同意后，建立双向关系，即盟A加入b1所属事务B1中，盟B、b1、审批者以及抄送的角色加入A1中。2.卡片添加盟外角色（A中的角色看到B中的角色卡片添加为盟外角色）当角色a1不在角色b1所属事务B1的盟外角色中时，a1可以向b1发起加为盟外角色的操作若a1角色权限为中级及以上时，同1中的选择角色b1添加若a1角色权限为普通及以下时，需要先进行A1的邀请加入本事务审批【new】，然后同1中的选择角色b1添加3. 移除盟事务可以移除盟外角色中的盟，移除为单向移除移除盟即移除该盟和盟中的角色，事务B1将盟A移除，B1所属盟B还在A中某些事务的盟外角色中，但A盟和A盟中的角色从当前角色中移至历史角色中4. 移除盟外角色事务可以移除盟外角色，仅将该角色从当前角色移至历史角色中，不影响其盟和当前事务建立的联系5. 申请加入当角色a1不在某一事务B1的盟外角色时，可以申请加入事务。（双向）当A在B1的盟外角色中，B在A1的盟外角色中，a1申请加入B1，不需要任何审批，a1加入B1的盟外角色中（单向-补全）当A在B1的盟外角色中，B不在A1的盟外角色中，a1申请加入B1若a1角色权限普通及以下，需要先进行A1的邀请B加入本事务审批【new】，同意后不需要B1的审批。补全B和A1的关系，即将B加入A1的盟外角色中，a1加入B1的盟外角色中若a1角色权限中级及以上，不需要任何审批。补全B和A1的关系，即将B加入A1的盟外角色中，a1加入B1的盟外角色中（单向-审批）当A不在B1的盟外角色中，B在A1的盟外角色中，a1申请加入B1，需要B1的加入事务审批，审批同意后，补全A和B1的关系，并将A和a1加入B1的盟外角色中（毫无关系）当A不在B1的盟外角色中，B也不在A1的盟外角色中，若a1角色权限普通及以下，需要先进行A1的邀请B加入本事务审批【new】，同意后进行B1的申请加入审批。通过则建立双向关系，A、a1加入B1的盟外角色，B加入A1的盟外角色若a1角色权限中级及以上，直接进行B1的申请加入审批。通过则建立双向关系，A、a1加入B1的盟外角色，B加入A1的盟外角色组织角色找组织角色会话梳理：组织角色a1可以向组织角色b1正常发起会话。（双向）如果A在B1中，B在A1中，会话后，检查a1是否在B1中，b1是否在A1中，不在需要补全