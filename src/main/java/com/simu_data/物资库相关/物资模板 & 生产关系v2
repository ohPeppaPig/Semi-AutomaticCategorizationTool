需求背景 & 目标目前的物资模型不能有效支持供需匹配，同时对生产规则配置的灵活性支持不足。通过重构提高物资模块功能的可用性。 影响范围物资模块：物资模板 物资库 采购模块： 采购服务 供需发布 服务：上架 定价 套餐需求描述物资模板相关物资模板是对物料的定义，是一组描述某样物资的数据集物资模板维护入口：物资模板维护提高到和事务物资库并列的层级，事务下资源-->物资-->管理物资模板
  
 在管理物资模板的模块，可以进行新建物资模板的操作。有两种方式新建物资，直接新建或在现有的物资模板上新建直接新建需要输入的信息包括：基础信息部分：主图，非必填，同目前新建物资模板上传主图的需求 *名称（必填），支持中英文，不超过64字符；同一个事务下创建的模板名称不可相同别名：支持中英文，规则与约束与系统现行保持一致*单位：必填，系统预置单位选择的范围，用户从系统预置中选择一个计量单位。预置的单位选择范围同目前物资模板的单位选择范围*建议零售价：必填，大于0，支持到小数点后两位，小于等于integer.max*分类，必填，需要支持即时搜索，即用户在输入分类时自动根据关键词推荐全网已有的分类名称，按匹配度由高到低排序；无搜索结果时，系统在该模版创建成功时自动新建用户输入的分类；分类名称不超过8个字符。属性及属性值：一组描述该物资模板的key-value，一个key-value包括：     属性名称：即key，支持中英文，不超过8个字符     属性值：即value，包括文本属性值和统计属性值，区别在于定义属性值时选不选单位；对于文本属 
       性值，不得超过20个字符；对于统计属性值，支持的单位范围和目前系统保持一 致，同时输入的 
         属性值只能为数字，数字不得超过float.max一个物资模板最多支持20个key-value的添加时间管理器：与物资模板现有的添加时间管理器需求保持一致 *是否公开：默认打开，打开后全网即可搜索并使用该模板，模版的公开性不区分盟内盟外。如何使用其他事务创建的物资模板见文档下文标签（非必填），可在模板中添加多个标签，同目前物资模板的添加标签功能 物资详情部分：对物资模板的图文描述一段富文本，富文本的功能、约束和限制与系统目前的普通发布富文本保持一致。  
 生产规则：定义生产该物资需要的原料 & 各原料需要的数量。新建生产规则的需要定义的信息包括：       *产量：必填，定义此生产规则可以产生多少产物        *生产规则名称，必填，文本，不得超过20个字符，不可为空       *公开性：必填，可选择公开、私密、选择性公开；选择性公开中可以选择盟内公开、事务内公开和自定义（此部分复用发布的公开性）；公开性影响 1、可见性，未对其公开的角色不可查看；2、复用。未对其公开的事务复用模板时不可复用该生产规则；复用模板见文档下文。 若物资模板为私密，则该物资下的所有生产规则都不能为公开或部分公开。       //tbd：公开性带来的复杂度成指数上升，在系统物资模块目前的使用状态下，成本大于收益，此处可以考虑简化         *原料表：一组原料和原料的用量，不超过30种。原料即其他物资模板（排除产物本身），选择原料需要支持关键字搜索，搜索范围包括：本事务维护的物资模板，盟内其他事务创建的公开的模板，盟外其他事务创建的公开的模板;若生产规则的公开性为公开或者部分公开，则选取本事务的模板时，也要求该选取的模板为公开；若生产规则为私密生产规则（可理解为秘方），则可以选取本事务下的公开性为私密的物资模板，若原料表中存在私密的物资模板，则该生产规则不可调整为公开或部分公开。原料用量为数值，支持到小数点后两位，大于0。 生产方式：非必填，文本，不超过500字符是否同步生成拆解规则：在新建生产规则时可以选择是否生成对应的拆解规则，拆解规则见下文约束与限制： 支持一个产物配置多条生产规则，但不可超过20条。同一物资模板下的生产规则不可重复。名称相同或原料组成和单位量都相同的生产规则认为是相同的生产规则  
 拆解规则，表明某个物资模板可以拆解出哪些物资，可以理解为生产规则的反向产物。      创建拆解规则时需要定义的信息同创建生产规则时保持一致；      同时支持从已有的生产规则直接逆向生成拆解规则 从系统已有模板创建：除直接从头创建一个物资模板外，支持从系统中选取一个已经存在的物资模板为基础进行重新创建。可以理解为从系统中搜索一个差不多的模板，以此为基础改一改变成自己的模板   1、搜索已有物资模板的方式：关键字搜索，搜索范围包括：当前事务下创建的所有物资模板（不包括失效的物资模板）、盟内和盟外的公开的物资模板。   2、在确定要复用的物资模板的基础上，支持对复用的物资模板的所有信息进行变更，字段的规范以及约束和直接新建模板保持一致3、修改后创建新的物资模板，新物资模板归属为当前事务。同时支持直接添加进当前事务的物资清单，注意直接添加进当前事务的物资清单不改变物资模板的归属。 
  
    
 物资模板的查看、失效与更新：物资模板列表展示的信息包括：主图、物资模板名称、所属事务名称（如果是本事务创建的物资模板，则直接展示“本事务”，如果是从盟内事务直接添加的物资模板，则显示盟内事务名称，如果是从盟外添加的物资模板，则显示盟名称 -事务名称）、分类、最后修改时间（时间显示规则同发布的更新时间显示规则）。 对于从盟内/盟外直接添加的物资模板，需要展示是否可更新（不要求实时更新，只要求刷新后可见）列表排序规则：首先按本事务维护的物资模板（所谓本事务维护的物资模板，包括本事务从零创建的物资模板和以系统现有模板为基础创建的模板）、从盟内直接添加到本事务的物资模板、从盟外直接添加到本事务的物资模板分组排列，每个分组中按拼音顺序排列需要支持关键字搜索查找  
 从物资模板列表可以查看某个物资模板的详细信息，详细信息包括基本属性、图文详情、生产规则和 拆解规则，与创建时需要输入的信息保持一致 
 物资模板的修改：修改物资模板的条件： 该模板为本事务维护的模板若该物资模板没有被复用且没有产生过实例（登记或生产），则可以更新全部信息；若该物资模板被复用或者产生过实例，其支持编辑的信息以及编辑后的关联影响有：主图：可以更换主图或者直接删除主图名称、分类、单位、属性组不可编辑建议零售价支持编辑，规则与约束见上文创建物资模板的定义别名支持编辑和删除，规则与约束见上文创建物资模板的定义标签支持增删是否公开：可以从私密调整为公开，不可从公开调整为私密 
 
   
 
 