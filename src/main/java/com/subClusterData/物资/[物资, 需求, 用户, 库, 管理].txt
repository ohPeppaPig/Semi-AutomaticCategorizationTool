（设计阶段）【物资库】核销报废的审批和通知: 1.审批的需求 2.审批结果需要通知给申请者的需求 
目标物资模块优化概要描述: 1、整体业务框架及流程 2、创建采购清单 3、分配物资 4、在目标或任务中根据实际情况，机动性采购物资；5、物资动态汇总表：  
移动端仓库动态和物资动态: 仓库动态需求链接：http://192.168.1.200:18090/pages/viewpage.action?pageId=24448084物资动态需求链接：http://192.168.1.200:18090/pages/viewpage.action?pageId=24448092视觉链接：https://lanhuapp.com/web/#/item/board?pid=2e9981c5-7cda-43ff-9793-86dd9446b194
【43周需求问题解决】-会话中的物资: 【43周需求问题】25.环境：300，发送2部分物资，签收一部分，退回一部分，系统消息显示签收全部物资——需求明确，方燕玉26.环境：300，拒绝全部／部分物资后，卡片颜色显示-与需求不一致——需求明确，方燕玉【解决方案】会话框中的文案：称谓遵循会话系统，统一使用“你”“全部”指：一张卡片中，发送方发送的全部物资，比如发送了3支铅笔和5本便签本“部分”指：一张卡片中的一部分物资，退回了一部分，比如签收了2支铅笔，即签收了部分物资；退回了2本便签本，即退回了部分物资卡片数量：不同的物资库中的物资，会根据库的数量分成不同的卡片卡片颜色：卡片颜色根据卡片中物资是否处理完，显示不同的颜色没处理：蓝色处理一部分：灰蓝色（见视觉图）全部处理完：灰色 
【衣食住行】餐饮行业线中复合物资与工作流: 问题：在餐饮中，复合物资通常用为套餐，但有时候套餐会一起上菜（比如肯德基），有时候套餐是一个个菜上（比如高级的西餐厅）。这与餐厅的经营理念有关，但这会影响工作流中配送环节，若是一起上菜，那么需要等所有菜品制作完成后，才能发起“配送”；若是分开上菜，那么“配送”也可以一道菜一道菜进行配送。解决方案：在衣食住行行业线，在配置复合物资时，需要配置者选择“合并上菜/分开上菜”，默认为“分开上菜”。合并上菜的流程为：套餐中每道菜生成一个“制作”任务，等套餐中最后一道菜制作完成后，再生成一个“配送”任务。分开上菜的流程为：套餐中每道菜生成一个“制作”任务，每个“制作”任务完成后，随即生成“配送”任务。最后都需要以复合物资的形式发送到顾客的物资库中。
【物资库】角标多维度（想要变成物资分类需求，角标专门用于优惠标记，待评审）: 1.背景：       当前用标签对物资进行分类的需求无法满足餐厅使用，需要对物资分类功能进行升级。由于“标签”这个概念在超级账号中没有分类的功能，在物资上使用标签进行分类只是临时的解决方案，需要回归到用角标进行分类的需求。2.产品调研：总结：在商品列表页展示商品品类信息和促销信息是目前比较通用的展示方式。通过研究商品分类，我们发现，分类需要支持多维度，并且每个维度下需要支持多层级。但需要考虑在应用多维度时的展示以及排序问题。   3.功能说明:有两个方案：方案一：完全通用，所有分类都由用户自己配置，在应用时，用户自己选择使用哪套分类维度。但会增加操作的负责度，以及用户搭建分类框架需要有经验；方案二：系统内置一套用于前台和后台管理的分类维度，同时允许顾客自己搭建前台分类维度。对于我们的挑战是，如何搭建一套通用的后台管理分类。3.1功能简述：角标配置。用户故事：管理者可以根据财务（资产管理）、物资（库存管理）、运营（商品管理）的需要，搭建本事务的角标管理体系。功能详述：优先级：高平台：WEB。描述：子事务可使用父事务配置好的角标分类最多3级若“勾选允许物资属于多分类”，在角标匹配物资模版时，不同分类下，都可以选择全盟物资模版。 3.2功能简述:物资匹配角标。（物资库中配置角标的功能删去）用户故事：财务（资产管理）、物资（库存管理）、运营（商品管理）等部门可以根据需要，自行将本事务物资模板匹配对应的角标分类。功能详述：优先级：高平台：WEB。描述：同一维度的分类下，若属于3级分类，所有物资都需要挂在3级分类下，不允许存在有些物资挂在3级分类下，有些物资挂在2级分类下的情况总览以及角标匹配模版时，物资模板的选择范围为“盟内模版”若该维度分类下，在未包含全部物资模版时，均归为“系统推荐”分类下。  3.3功能简述:角标应用。用户故事：运营人员可选择对应的角标分类，以便让他们的服务对象更好的了解产品体系。（目前能想到的一个应用场景）功能详述：优先级：高平台：WEB。描述：若多个维度同时被应用，同维度的分类需要排在一起，再进行内部排序调整。  （需要视觉帮忙考虑不同层级，多个维度同时展示的样式） 4.15日例会后需求讨论参与者：杜波、周鹏、刘劭、方燕玉讨论结果：角标多维度实际为：物资分类多维度角标分类改完“分类”只做一级分类，暂时不做多级分类，需要和顶顶的角色分类统筹考虑目前不要有“启用”这个说法在应用时，只能选一个维度要考虑物资卡片上的分类显示
物资库、获取物资服务重构: 需求背景 & 目标目前的物资库基本满足物资管理需求，但存在以下问题需要解决：1、在系统服务化的背景下，目前的获取物资的方式不能以服务的方式进行管理2、餐厅点餐的功能行业定制化程度较高，有偏离主系统的风险3、在供需匹配的场景下，物资库中存在对物资模板进行分类的需求参考目前市面上已有的电商后台的商品系统、仓储系统等，结合超级账号的服务模块，对物资库、获取物资服务进行重构，逻辑视图如下： 说明销售层：主要面对前端用户，对于超级账号而言，就是使用"获取物资"服务的用户。销售层决定可售卖的物资（上下架）仓储层：仓储层是进行最基础的物资管理的模块，在仓储层维护物资模板和生产关系信息，进行出库入库、生产、拆分、核销、报废等操作调度层：销售层和仓储层的物资库存会存在联动，如餐厅用户下订单后锁定库存，支付后扣减库存，退菜后增加库存；仓储层入库、登记等操作影响销售层可出品、上架的物资。类目+属性系统：分为前台类目和后台类目，同时服务于销售层和仓储层。前台类目支持筛选、搜索等前端操作；后台类目支持录入、供需匹配。重构计划step1 ：获取物资服务 预计3-4个工作日，计划第14周周中前完成step2：物资模板 + 后台类目（物资分类），待定step3：农场 + 餐厅试运行验证用户故事服务配置 服务流程 服务申请管理 服务发现 & 申请 交互示例（低保真原型）             视觉图：web端：https://lanhuapp.com/web/#/item/project/board?pid=cbd71f43-0a1e-430e-8caf-43fb1103c7ab
【物资供需迭代】物资采购服务、供给发布: 采购服务&供给发布需求V1.1——2019.04.081、采购服务工作流：两个节点 2、服务申请： 3、服务弹窗    4、供给发布创建供给发布：支持添加多个物资需求单  查看供给发布： ====================================================================会议时间：2019.03.25会议主题：出品对接供需与会人员：方燕玉、杜波、潘宁会议结论：1、物资采购服务的“物资部采购&移交”和“物资核收”两个节点合并为一个节点，后“物资核收“为审阅环节（节点配置添加审阅设置），两者共用一个会话。2、支持合并采购，即从多个需求单关联到同一个供给发布、再原路发送物资；3、支持一键移交，自动匹配需求和物资、同时支持手动添加物资。4、供给发布，线上获取物资用服务承载。获取物资即生成服务，物资管理员自动添加为供给发布客方。5、供给发布添加显示交易详情。
获取物资服务、服务流程优化、供需总览: fyi 见子发布 2019.6.17日评审会议纪要1、视觉/交互优化意见     服务配置页面，子流程配置需要弹框配置，不存在“调用服务”     服务流程，flowinfo区域，是否可以考虑提升美观度?     移动端：卡片堆叠式，在流程和操作历史较多的情况下，下滑是否会滑到屏幕外     服务取消，即服务申请终止，服务流程页面是否要做交互处理     批量接收功能，全选按钮考虑和item的复选框保持一致置于左侧     确认离店按钮缺失，加菜按钮应该置于表单区域     移动端获取物资页面，需要加扫码获取入口，且扫码后加入购物车需要带有实例编号     获取物资界面，可以直接按照盟事务归类，无须按物资模板归类     采购服务申请页面，创建采购发布按钮不够明显     编辑服务的同步问题     获取物资上下架配置修改上下架数量时，考虑统一配置后确认     时间段修改和删除按钮考虑置于左侧时间段列表中     2、项目分工       见任务分派3、需求todo     服务左侧弹窗提醒     h5是否要保留，还是必须通过app点单     物资退回/接收通知形式     订单中除了物资流信息，考虑增加资金流信息     外卖超时未支付直接取消、超时未签收默认直接签收     采购服务、供需发布需求闭环完善2019.07.03 供需细节梳理采购服务部分：      1、在物资选择弹窗，“可售数量”置于图片右下角，且为白色，基本看不见。 @雕姐      2、在采购服务表单进行物资移交时，需要可以选实例      3、需要支持部分移交，且接收方可以进行部分接收；对于退回的物资，服务提供者可以更换实例再次移交      4、考虑支持一次性移交多个物资模板，即在移交物资时，可以向服务申请者一次性移交多个物资模板对应的物资      5、移交物资时，物资的选择范围：当前事务三个默认库+自定义库      6、采购服务移交节点，提供者视角增加当前库存总量统计列以及已经移交的成功的数量       供给发布模块：      1、生成供给发布时，物资需求量的计算为采购申请的需求量减去已经移交的需求量      2、生成供给发布时，添加其他采购服务申请单时，需要排除已经有对应的供给发布的采购需求单      3、通过采购服务生成供给发布后，也可以在供给发布中继续添加采购服务申请单；且考虑优化采购服务申请单的展示方式      4、创建供给发布时，可以去除下方不必要的表单信息      5、线上获取弹窗结束后，直接进入供给发布的服务tab      6、需要跟踪各物资的采购过程，目前只跟踪采购数量，不跟踪采购状态      7、线下补录需要选择库      8、购物车模块提供按商家组织和按物资模板组织的两个视角                
「使用培训」10.23物资部及供应商超级账号使用培训: 时间：2018.10.23 14：45地点：25楼会议室参与人员：马张驰、张瑞、殷豪、江阴上诚电子供应商 共4人
内容：整体介绍了超级账号；介绍了发布模块，包括创建发布的流程，官客方的概念；简单介绍了角色模块；介绍了物资模块，包括登记物资，查看物资详情，追加物资，并在会话中发送物资；介绍了资金模块，包括初始化账户，和真实账户绑定，在会话中发送资金；介绍了交易模块，包括平账和记录查询；通过登记了一个网络交换机并发送物资和资金的例子走完了所有流程；效果：供应商表示使用起来没问题，后续会使用超级账号登记相关物资并进行交易；
【物资库】- 库存波次与实例优化: 可数与不可数定义：     根据物资模板中的单位定义来表示该物资是否可数      可数单位：份、套、件、枚、盒、只等单位      不可数单位：标准度量衡单位，如长度单位米、千米、厘米，重量级单位克、千克、吨，面积单位平方米、平方千米，体积单位：立方米、毫升等      *以上未做穷尽枚举影响范围：库存操作：登记入库、核销报废、拆分库存转移：获取物资、租用物资记录信息：物资历史动态需求描述 低保真原型  
物资实例需求迭代: https://lanhuapp.com//web/#/it文档修改记录 新增打印实例二维码的需求新增拆分实例二维码的需求背景：在整理单品二维码的时候，发现当前物资实例的信息展示无法支撑，因此需要对物资实例需求进行迭代。场景汇总： 功能说明：1. 功能简述：查看物资实例详情用户故事：用户可以查看物资实例详情功能详述：入口：物资库的库存；扫码查看实例详情优先级：高平台：WEB、APP。描述：物资实例详情页面信息构成：分别抽取物资模版、物资卡片和物资实例信息的部分信息。物资模板：名称、单位、时间管理器中属于物资模板的信息物资卡片：标价物资实例：数量、入库价（有权限的角色才能查看）、实例ID、实例特有属性、实例备注（移动端临时在备注中+对应物资模板上的描述信息，在物资模板升级后，这个需求就作废了）、时间管理器中属于实例部分的信息附：物资库uml图 2. 功能简述：管理物资实例用户故事：有管理权限的角色需要管理物资实例功能详述：管理的入口：在物资库的库存中进行管理；扫码查看物资实例优先级：高平台：WEB、APP。描述：可对物资实例进行以下管理操作：发送物资实例可以拆分出一部分进行发送【动态记录】发送动作发生的物资实例上，记录此次“转移出库/交易出库”动态（被转移出去的物资实例的动态，在发送动作发送的物资实例动态中，无法继续跟踪查看）； 若在发送时发生拆分，并且当前设备连接了打印机，自动打印拆分出的新的物资实例的二维码若不拆分发送不区分发送动作发生的物资实例，和被发送的物资实例，仅在物资实例上记录【物资动态】记录此次“转移出库”动态； 核销物资实例可以核销该批实例中的一部分【动态记录】核销动作发生的物资实例上，记录此次“核销”动态； 不再追踪被核销的物资实例可以不拆分核销物资实例，本批次物资实例的物资动态，终止于“核销”记录报废物资实例可以报废该批实例中的一部分【动态记录】报废动作发生的物资实例上，记录此次“报废”动态； 报废完成后的物资实例，查看“报废”动态（这是该物资实例的第一条动态，不再能查看原物资实例的动态）若报废一部分实例，并且当前设备连接了打印机，自动打印拆分出的新的物资实例的二维码若不拆分报废不区分报废动作发生的物资实例，和被报废的物资实例，仅在物资实例上记录【物资动态】记录此次“报废”动态； 拆分物资实例（复合物资为拆包）（暂时不做）若当前设备连接了打印机，自动打印拆分出的新的物资实例的二维码拆分动作发生的物资实例以及被拆出的物资实例上，记录本次“拆分”动态（这是被拆出的物资实例的第一条动态，不再能查看原物资实例的动态；对于拆分动作发生的物资实例，也无法继续跟踪被拆出物资实例的动态）拆包不涉及新的二维码，因为每个普通物资实例自带二维码打印二维码（web端要做）添加备注不能编辑该实例在以前的物资库中留下的备注3. 功能简述：接收物资实例用户故事：当该物资实例接收方查看物资实例详情时，可以接收物资实例。功能详述：入口：接收物资审批时，可以点开查看物资实例详情，并且在该页面进行接收物资实例；接收方扫物资实例二维码后可以查看物资实例详情，同时接收物资实例。优先级：高平台：WEB（迭代中做）、APP。描述：接收的需求同线上的接收物资实例。线上接收物资审批中，需要新增查看物资实例详情的功能，并能在该页面直接接收物资实例。接收物资实例，目前只允许整批接收【动态记录】该批物资实例上，记录“交易入库/转移入库”动态。web视觉   h移动端   盟内角色获取物资时，价格为0盟外角色获取物资时，价格为实例所属模版的标记 支付的需求4月17日技术评审结果：考虑在盟内获取物资和盟外获取物资做区别。都叫“获取”物资，只是盟内总价为0，盟外总价为实例对应模版上的标价补付钱界面，有支付宝/微信/挂账三个支付方式挂帐和余额是互斥的，若顾客选择挂帐，并且有余额，付款逻辑应是，扣完余额后，允许挂帐支付和充钱要分开将“库存”改为“名称”在er图上补“图片”场景汇总表上，公开的物资，全都能查看物资实例；已报废有权限查看的，应该可以管理实例。web端暂时不做
物资租用: 1.背景：共享雨伞项目，需要实现对物资的租用。2.目标规划：场景： 迭代规划： 2019年6月14日更新规划：    6月17日讨论结果   物资视图和服务调用进行合并-----已修改完毕最大租用数量在本阶段为1-----行业线将这个值默认为1服务流程修改区域，哪些修改在有进行中服务时是允许的。------服务统一治理，和刘劭说过了，服务交互修改的事情和张瑞说过了扫完位置二维码后，确定完位置后，才能查看具体位置上的可租用物资信息-----已修改完毕服务模板应该叫“自提租用服务”，整理自提、店内就餐和外卖的关系-----已整理完成并且修改完成之后还会扩展在A店自提，但是要从B店调货到A店时间和地点两个要素决定服务类型：行业线-获取物资服务：店内（店内就餐、自提）和外卖。店内就餐和自提的区别：普通座位为店内就餐座位，自提为定制一个座位。店内和外卖的区别：选店内座位为店内，选店外地址为快递。租用物资服务：在物资所在地为自提，不在物资所在地，为快递选择快递后，在获取物资页面盟外区域，再过滤地址（店铺）。（讨论这个的时候，说的是，先确定是自提租用，然后再在盟外区域过滤可自提的地点）返还按钮改为扫码还----已修改完毕返还流程需要考虑一下细节-----返还流程负责人为服务提供事务内的角色，协作者为服务发起者。所有物资都返还完成后，再进入支付环节。购买当前阶段为全购买，但是需要思考一下之后要是走部分购买，是定制购买节点（选物资，支付）还是进入获取物资服务（还是需要定制获取服务服务，选择部分已租用的物资后，直接跳到最后的支付环节）。------目前已改为全购买，但是之后想做成定制购买节点。理由如下，暂时服务不支持在一个节点中关联另一个服务，即使关联了，还是需要定制获取物资服务。至于要统计服务转购买，统计一个服务进入互斥节点的次数，互斥节点中涉及的金额。3.押金调研：  场景：用户在开启服务时需要做一笔预授权，当服务完结算时，再从预授权资金中扣除消费金额，剩余返还给用户。蚂蚁金服资金授权（小程序）https://docs.alipay.com/mini/introduce/pre-authorization预授权服务（app/小程序）https://docs.alipay.com/pre-open/20180417160701241302这两个地方都会涉及推广蚂蚁信用分“信用预授权是由芝麻信用联合提供的，是支付宝预授权产品的一个子能力，用信用链接用户和商户，通过信任来代替资金冻结，最终促进完成交易。”支付宝预授权阶段不收费；预授权转支付阶段计收费，按收款方收款金额的0.6%实时收费4.功能说明：4.1功能简述：配置租用服务用户故事：功能详述：优先级：高平台：WEB端描述：   4.2功能简述：使用租用服务用户故事：功能详述：优先级：高平台：WEB端、移动端描述：    4.3功能简述：租用物资在物资库中的表现用户故事：功能详述：优先级：高平台：WEB端、移动端描述：若物资在租用期间到期，需要在返还后再进行报废。  4.4功能简述：租用物资在交易中的表现用户故事：功能详述：优先级：高平台：WEB端、移动端描述：没有做定制，只是展示一下。 4.5功能简述：租用物资在服务中的表现用户故事：功能详述：优先级：高平台：WEB端、移动端描述：筛选条件：服务名称-租用服务；状态-进行中筛选后， 多一列数据，租用时长（可排序，“最长到最短”或“最短到最长”）4.6盟客币抵扣的事情，由刘劭统一治理，已经和他说了遗留问题（已解决）：扫一个位置二维码如何选择进入点餐服务还是租用服务。初步讨论的解决方案：将服务二维码和位置二维码进行关联，生成一个新的二维码。顾客扫新二维码后，进入该服务并且提取位置信息。需要考虑在哪配，以及交互的问题web视觉移动端视觉
物资模块:   物资库管理：用户可以使用不同物资库对不同的物力资源进行存储，以便将物力资源进行分类管理；物资库管理员配置：每个物资库都会指定库管，能将物资管理责任到人。物资模板管理：用户可以管理物资模板，以便对所需物力资源进行规划；物资信息管理：对于要出售的产品，用户可以将需要展示的信息录入系统，以便让顾客更全面了解自家的产品；物资登记、转移：线下物资的流转可以记录到系统中，以便实现物资的信息化管理；打印物资标签：用户可以将物资标签打印出来，贴在实体物资上，以便更好的在线下展示物资信息；物资生产成本卡配置：根据预先配置的成本卡信息，可以为线下产品标准化生产提供依据；物资生产管理：用户在系统中进行生产操作时，系统会自动扣除原料库存，以便实时跟踪生产过程；核销管理：物资在线下被消耗掉后，可以在系统中将物资核销掉，可以精确记录物资库存减少的原因；报废管理：物资在线下破损好后，可以通过报废操作将这个物资信息更新到系统中，以便实现库存精细化管理；物资核销、报废、发送审批：当物资发生核销、报废、发送操作时，主管可以进行审批，以便及时跟踪辖区内物资流转情况；已报废物资管理：物资发生破损后，会放置在同一的仓库中进行管理，系统对应配置了报废库；拆分管理：用户可以通过拆分操作，将大包装的物资拆分为小包装的物资，以便更好的领用物资；复合物资管理：若用户想将多个物资打包存放，可以通过打包复合物资实现，也可以通过拆包将打包好的物资拆出来单独存放；保质期管理：现实生活中的物品存在或短或长的保质期，系统中可以对物品进行保质期管理，快过期前，可以提醒库管及时处理查看库存动态：用户可以查看该物品的流转记录物资总览：老板可以查看当前名下所有的物资集合信息。
【需求获取】10.31物资部需求获取: 参与者：殷豪、周鹏、方燕玉时间：2018年10月31日下午4点议程：调试餐厅事务，为餐厅试运行做准备，在调试期间遇到了一些问题，如下：在配置工作流时，选协作者时，需要有分类帮助用户快速找到所需的角色。使用搜索，搜对应事务名称时，搜索没有用。解决方案：优先显示本事务的角色，搜索时，可搜事务名称父事务高级权限的用户，在子事务为物资库添加角色，找不到公开性为本事务公开的角色。在测试时，没能复现该情况。在讨论发送某个物资时，用户的第一反应是，“找到该物资，并在物资的更多操作中，找发送的按钮”，需要讨论是否优化需求。物资部需要有全选的发送物资的操作。场景：物资部为餐饮建立一个物资库，专门存放为餐饮采购的物资，每天采购了餐厅所需的物资后，需要一起发送给餐饮的厨师长。（向殷豪确认，这个场景是否存在）批量添加角标。场景：在配置物资库时，用户需要快速为几十个菜品添加“产品”角标。但这个功能的使用频率比较低。在物资库真正投入使用时，餐厅添加新的菜品，应该都是一个个添加的。需要讨论是否优化需求。用户在使用出品发布时，不知道将公开性更改为“公开”后，盟客网才能在对应时间段内查看到菜单。解决方案：增加提示出品计划通常是一天，可以考虑设置默认时间，减少用户输入。解决方案：默认时间为：配置出品计划的T+1  0:00-23:59标签的添加方式不方便。优化需求。座位上，添加拼桌模式。需要讨论是否优化需求座位库上设置一个默认开放时间。优化需求：默认天数为全选，开放时间为9:00-13:00；17:00-21:00在座位库详情页，显示开放时间模板转移的功能。场景：物资部在帮餐厅厨房录物资时，录在了物资部的库中，需要将所有物资发送到厨房的仓库，但物资上已经录好的生产规则，全部消失，给物资部增加了无端的工作量。问题分析：物资部当前是在为厨房分担工作，正常情况下，厨房应该自己录产品的生产规则，不存在录到其他部门物资库中的问题。在配置生产规则时，选物资时，有大海捞针的感觉，用户无法快速找到自己想要的产品。场景：用户想在添加产品时，只在产品中查看，不要看到原料。解决方案：添加角标筛选。
物资模块（对应电商的仓储模块）梳理: 背景：基于现有的电商模块架构 ，做菜品口味需求梳理时，发现物资模块和销售模块的信息存在不清晰的地方。因此需要梳理仓储模块以及销售模块以便增加扩展性。 场景梳理： 架构 
【需求迭代】-物资详情页实现快速编辑标签: 当前系统的情况：编辑物资的标签，需要进入编辑模式。优化成：在详情页即可随时编辑标签。与发布添加标签的方式保持一致。视觉： 
【已完成】物资动态（原物资历史）: 目标：为了实现用户对单个物资进出库情况进行查看的功能。在仓库动态中，用户更关注的是物资库在某个场景（入库/出库/转化......）下的物资动态但是在仓库动态中缺乏展示某个具体物资的动态的视角，而且如果在仓库动态中展示全量的信息，比如将入库/出库等按时间轴展示，信息量太大，用户还需通过筛选才能展示某个物资的动态信息因此，考虑在物质上记录物资的动态信息。详细需求见  原型见附件
【衣食住行】第十周优化（订单页补充座位信息；位置管理器；失效物资模板）: 订单详情页补座位信息    位置管理器背景：在原始地图上，可以导入平面图，但缺少删去平面图的需求需求：导入平面图后，可以删去平面图，但同时会删去平面图上手动勾绘的平面视图，并取消与位置卡的关联。 失效物资模版背景：失效物资模板需求不明确，导致移动端开发有障碍需求：   在补已失效物资模版的物资样式的时候，麻烦考虑一下该物资被获取，以及发送到其他盟时的样式展示。       
【物资库】物资多维度分类: 1. 背景：经讨论决定（4月15日讨论，参与者：杜波、周鹏、刘劭、方燕玉），物资多维度在本阶段只实现：只做一级分类，暂时不做多级分类在应用时，只能选一个维度主体需求参考角色分类的需求，细节上对物资库进行适配需要和角色分类需求一起考虑对分组进行排序2. 功能说明：2.1 管理物资分类维度2.1.1功能简述：查看物资分类维度用户故事：用户可以在物资库中查看物资分类的不同维度，以便了解物资库中的分类维度详情功能详述：优先级：高平台：WEB、APP。描述：分类维度包括默认维度和用户自定义维度：默认维度为当前物资库的默认展示方式用户自定义维度的物资分类用户可以切换分类维度，查看不同维度下的物资分类可搜索物资名称，展示所有分组下物资分类的情况，若分组下没有这个物资，显示“分组名称：（0）”2.1.2功能简述：添加物资分类维度用户故事：用户可以在物资库中添加物资分类维度，以便满足不同业务场景中的物资分类需求功能详述：优先级：高平台：WEB、APP。描述：权限要求：本事务物资权限中级及以上、父事务物资权限高级及以上、盟内物资超级权限添加新的分类维度时需要输入维度名称，名称要求1-24字符，同一事务中维度名称不可重复2.1.3功能简述：编辑物资分类（增加了分组排序）用户故事：用户可以编辑物资分类维度功能详述：优先级：高平台：WEB、APP。描述：权限要求：本事务物资权限中级及以上、父事务物资权限高级及以上、盟内物资超级权限可编辑物资分类维度名称，以及更改分组排序“默认维度”不可编辑2.1.4功能简述：删除物资分类维度用户故事：用户可以删除自定义的角色分类维度功能详述：优先级：高平台：WEB、APP。描述：权限要求：本事务物资权限中级及以上、父事务物资权限高级及以上、盟内物资超级权限默认维度名称不可删除删除需要二次确认，提示用户：“您确定要删除该维度吗？”若维度被应用时（在衣食住行行业线，目前应用于出品发布；等获取物资服务上线后，主系统可应用于获取物资服务），不可删除。 （致视觉：角色多维度也要将“添加分组”加到三个点里；需要确定一下“维度列表”的弹窗最大和最小高度） 2.2 管理物资分组2.1.1功能简述：添加物资分组用户故事：用户可以在一个分类维度下添加物资分组功能详述：优先级：高平台：WEB、APP。描述：无默认分组（和角色分类不一样的地方）添加分组时用户需要填写：分组名称：1-24位字符（因为考虑在移动端菜单页面展示问题，是否此处字符数量要减少一些），同一维度内分组名称不可重复将物资模板匹配到分组下物资模板可查看：模板名称，所属盟选择范围：本事务使用过的所有物资模板（盟内+盟外，有库存+无库存，未失效的模板）按复合物资和普通物资进行分类同一维度内允许一个物资模板匹配到多个分组内（和角色分类不一样的地方）2.1.2功能简述：管理物资分组用户故事：用户可以管理物资分组功能详述：优先级：高平台：WEB、APP。描述：可管理以下内容：分组名称：（需求同添加分组时分组名称）将物资模板匹配到分组下：（需求同添加分组时匹配分组）在普通物资和复合物资分类前，有本分组的物资匹配情况删除本分组需要二次确认，提示用户：“您确定要删除该分组吗？”若分组对应的维度被应用时（在衣食住行行业线，目前应用于出品发布；等获取物资服务上线后，主系统可应用于获取物资服务），不可删除。 （致视觉：这里交互要与添加角色保持一致） 2.3 查看物资分组用户故事：用户可以查看物资分组功能详述：优先级：高平台：WEB、APP。描述：可以在以下地方查看物资分组：在物资卡片上可查看分组信息：“分类只对该事务有效 转到其他事务后 不带原有的分类信息”需要同时显示维度和分组信息 （致视觉：麻烦确定一下筛选框的高度）2.4 使用物资分类2.4.1 筛选物资分类用户故事：用户可以通过筛选物资类，快捷筛选出目标物资范围功能详述：优先级：高平台：WEB、APP。描述：系统中原筛选角标的功能，替换为筛选分组，具体有筛选功能的页面有：物资库详情页衣食住行行业线：出品发布-添加计划产品页面思目论坛行业线：暂无公共服务行业线：暂无产学研教行业线：还没问盟客世界行业线：还没问具体多选和单选分类按各功能页需要定制2.4.2应用物资分类用户故事：用户可以应用物资分类，以便使各物资模板进行更好的分类展示功能详述：优先级：高平台：WEB、APP。描述：当前只应用于衣食住行出品发布只能应用一个维度下的物资 可以通过“管理维度”直接跳转到物资库（致视觉：麻烦确定一下筛选框的高度）待解决：集团总部（盟）想统一对物资分类进行管理时，该如何管理所有事务的物资分类。
物资实例需求迭代1.1: 1. 背景在扫单品二维码查看物资实例详情时，遇到两个问题。一、实例动态分类不明确，有些是属于管理需要查看的动态，有些属于溯源的动态，需要拆分开来展示。二、物资实例拆分，需要有批量拆分的功能，并且需要规定什么时候能拆分出新的物资实例ID。2.功能说明2.1功能简述：拆分物资实例用户故事：用户需要快捷拆分物资实例，以便快速将一批物资实例拆分成小份。功能详述：优先级：高平台：WEB端、移动端描述：需要拆分出新物资实例ID的场景（删除：只要操作发生，若存在审批不同过的情况，仍是新ID，不还到原有实例中）：获取物资核销物资报废物资发送物资(发送物资若从实例上拆出来，发送出去，又被退回后，会回到原物资实例批次中)新增“快捷拆分”的功能。应用的场景是用户需要快速将一批实例拆分为更小数量的批次，比如饼房生产了5000克饼干，需要分为每份200克的饼干进行售卖。用户需要填写所需的单份数量：整数或者小数（最多三位），否则提醒“最多三位小数”；“请输入数字”系统自动计算整批实例可拆分出来的批次，以及剩余数量。文案：“您会获得：每批3台，共666批的iPhone 6plus，另有2台剩余”。快捷拆分出的所有实例，包括剩余实例都生成新ID单份拆分功能：拆分出的新实例，和原有实例都生成新ID。 2.2功能简述：打印实例二维码（5.24新增）用户故事：用户需要打印物资实例的二维码。功能详述：优先级：高平台：WEB端描述：打印二维码：  （移动端不做）   视觉 2.2. 功能简述：打印物资实例二维码用户故事：当用户需要对物资实例进行管理时，可以为物资实例粘贴二维码。饼房模式下，饼房人员需进入物资库打印实例二维码，若需要对一堆物资进行拆分后，再打印二维码，可直接在拆分时打印二维码；奶茶店模式，奶茶店人员需要一边打印二维码，一边生产实例，可以在接收制作任务时打印二维码。功能详述：二维码样式包含以下内容：实例二维码盟logo品名：实例所属模板的名称店名：盟名称-事务名称地址：事务地址联系方式：事务联系方式生产日期：若配置保质期的时间管理器，自动取物资的生产时间保质期至：若配置保质期的时间管理器，自动取物资的到期时间二维码的入口移动端选择“打印二维码”后，直接打印二维码；如果没有连接打印机，不能进行打印。
【物资库】物资模板的需求梳理: 文档变更记录：变更时间：2018年12月13日，移动端视觉开发评审后变更者：方燕玉变更内容：具体需求见：  物资模板需要解决的场景：生产物资时，仓库中物资数量为0，需要选择物资模版进行生产。引申出来的问题：物资模版的目标：将物资进行归类管理；提高登记便捷性；在一定程度上保证物资信息的权威性。对于归类管理的解决方案：物资模板是将库存管理中的最小可管理单位。对于用户在事务内的仓库创建的物资模版，可以认为是本事务的产品，用户有以下操作：添加生产规则/添加打包规则生产产品编辑失效对于其他事务转移而来的物资模版，是其他事务的产品，有以下操作：失效提高登记便捷性的解决方案：用户可选择盟内已有的物资模板进行登记用户不可以选择其他盟内的物资进行登记。理由：登记是一个特殊的功能入口，对于盟内的产品，可以通过生产功能，生产而来，其他盟的物资，可以通过交易获得。在盟内登记物资的场景只可能是：供应商由于某些因素没有加入超级账号，库管需要补录物资。对于“苹果公司没有加入超级账号，但他的供应商小A加入了超级账号，并有一张物资模板“iPhone X 128g””，我们思目创意可以使用该模板吗？答案是不可以，因为很可能还有供应商小B C D，这几个供应商的物资模板并不是官方的，因此，他们提供的模板都不一定是公正客观的官方模板，思目创意引用这种类型的物资模板登记物资，意义不大。综上，用户登记物资时，模板的选择范围是盟内。在一定程度上保证物资信息的权威性，的解决方案：彭庆福创建“盐水鸭”的物资模板后，可以使用该物资模板进行生产，所生产出来的盐水鸭的实例ID都带上了彭庆福的盟代码当顾客A购买了一只盐水鸭后，顾客A的物资库中会有一张“彭庆福盐水鸭”的物资模板，且有一只盐水鸭的库存。（当盟内产品交易到其他盟后，会自动加上盟名称）10月29日内部评审的改进意见：物资模板与物资库中现有卡片合并，不单独存放，理由：两者在用法上很一致。可以考虑合并，并通过筛选，筛选出库存为0的物资模板。在物资库内可筛选：模版类型：本盟创建的模板和其他盟的模板；模板生效情况：生效和失效；库存情况：有库存和无库存待徐总确认评论是否要穿透？在需求里要区分模板的创建者和拥有者。物资模板的编辑条件：模板创建者，库管理员、有中级及以上物资权限的人在库上配置位置管理器在拆分的功能上配置单位转化的功能登记物资时，同时登记一个物资模板 11.06日徐总确认需求后的建议：超级账号中物资模板全网通用，物资模板的名称全网唯一。用户可以用其他盟的物资模板进行登记，但使用其他盟的物资模板登记的物资，不能用于正常的交易，除非进入报废库，才能进行交易。在创建物资模板后，系统自动给模板加创建者所在盟的名称角标筛选的地方，提示用户，这是“角标”物资模板要单独存放11.26日徐总确认完设计后的建议：在模板页默认展示本事务创建的模板登记物资的入口在模板上物资库上不放“登记物资”“打包复合物资”的入口在物资模板页可以搜全网模版角标有一个统一设置的入口标签属于模板标价的编辑入口暂时放在模板上，之后再优化
物资实例溯源 & 管理: 需求背景 & 目标系统中对物资实例进行各项操作时，会产生相应的操作记录。由此产生了实例操作记录的管理和溯源需求需求描述管理&溯源可查看的信息见下表： 交互原型（可抛弃原型） 
（设计阶段）物资库-时间管理器+报废库的需求:  时间管理器目标： 时间管理器功能梳理：相关需求文档  web端视觉：  移动端视觉：待定 内部评审后的建议为：在物资库中扩充出  ，以及触发提醒时，在  通知栏中需要提醒用户。徐总评审后的建议：“提醒”文案意义不明确，需要改为“到期前提醒”触发提醒的物资排在最上面报废库物资卡片的使用逻辑遵循普通物资库的使用逻辑（评审前的需求为，每报废一批物资，都单独存放，与普通物资库的使用逻辑不一致）报废后的物资应能继续核销报废原因需要分为自动和手动报废库管理员默认为事务管理员初始化事务时，就有报废库，保留修改公开性的入口在设计阶段提出的建议：物资自动报废后，需要通知到相关的负责人，进行线下物资的报废/核销操作。通知的需求见  
获取物资、到店点餐、外卖配送服务验收问题梳理:  
获取物资服务重构后，需要调整的功能（编辑中）: 失效物资模板时，检查该物资是否上架会不会影响就餐人数的统计目前餐厅需要下载生产实况表会员角色的事情（挂帐）配置盟客币需要放到主系统物资维度半成品
物资规格化重构: 文档变更记录 一、需求背景 & 目标1、目前物资模板存在的问题：     在领域模型层面，物资模板的归属存在问题。目前，创建物资模板的入口在具体的某个仓库中，且没有统一的维护入口。而物资模板作为描述一个产品/物料的一组数据，对于一个盟或事务而言，在整个物资模块拥有一个入口进行维护更为合理。    物资模板的定义存在模糊。目前在业界的实践中（电商的商品管理系统、库存系统等），通常会引入spu和sku的概念（spu和sku的概念见背景知识），即标准产品单元和库存单元。而目前超级账号的物资模板其实是“用户自定义的分类和该分类下的属性名”。2、相关背景知识：     spu与sku：https://www.cnblogs.com/lingyejun/p/9569563.html     后台分类和前台分类：《淘宝十年产品事》 第二章     国家统计局标准产品分类：http://www.stats.gov.cn/tjsj/tjbz/tjypflml/二、需求影响范围产品模板：物资模板重构、库存、商品相关服务（上架、套餐、定价）、交易（发出/收到物资）、采购。想到再补充 三、领域模型 名词解释 四、需求描述 & 低保真原型 4.1 物资模板相关     物资模板的概念： 一组描述商品特性的可复用的、标准化的易检索的数据集合。从业界常用的spu、sku概念来看，超级账号的物资模板概念是spu。  4.1.1 物资模板维护入口：物资模板维护提高到和事务物资库并列的层级，事务下资源-->物资-->管理物资模板 4.1.2 物资模板的创建：在管理物资模板的模块，可以进行新建物资模板的操作。有两种方式新建物资，直接新建或在现有的物资模板上新建  注：每个事务都可以查看本盟下所有的物资模板，但是创建、编辑、失效的权限需要进行控制直接新建需要输入的信息包括：基础信息部分：主图，非必填，同目前新建物资模板上传主图的需求 *名称（必填），支持中英文，不超过64字符；同一个事务下创建的模板名称不可相同别名：支持中英文，规则与约束与系统现行保持一致*单位：必填，系统预置单位选择的范围，用户从系统预置中选择一个计量单位。预置的单位选择范围同目前物资模板的单位选择范围，支持搜索单位名称*建议零售价：必填，大于0，支持到小数点后两位，小于等于integer.max*分类，必填，需要支持即时搜索，即用户在输入分类时自动根据关键词推荐全网已有的分类名称，按匹配度由高到低排序；无搜索结果时，系统在该模版创建成功时自动新建用户输入的分类；分类名称不超过8个字符。        //todo  创建模板时选择的分类实际上是系统分类，系统分类是用户自维护的平铺的分类系统还是预置一套标准分类系统供用户选择属性及属性值：一组描述该物资模板的key-value，分为普通属性和时间属性，普通属性包括：    属性名称：即key，支持中英文，不超过8个字符    属性值：即value，包括文本属性值和统计属性值，区别在于定义属性值时选不选单位；对于文本属         性值，不得超过20个字符；对于统计属性值，支持的单位范围和目前系统保持一 致，同时输入的           属性值只能为数字，数字不得超过float.max；一个物资模板最多支持20个key-value的添加  时间属性即目前系统中物资模板上的时间管理器*是否公开：默认打开，打开后全网即可搜索并购买该模板的授权，模版的公开性不区分盟内盟外。选择公开后可以为模版定价。在定价为0的情况下，需申请授权审批；在定价不为0的情况下，可通过付费直接购买（目前只支持支付盟客币购买）。如何购买授权见下文标签（非必填），可在模板中添加多个标签，同目前物资模板的添加标签功能规格：包含规格名和规格值，规格名和规格值不得超过8字符，一个物资模板不得制定超过三种规格，一个规格下不得超过20个规格值。规格对确定sku、生产规则的制定、采购、库存、销售都有重要影响。图文详情：一段富文本，富文本的功能、约束和限制与系统目前的普通发布富文本保持一致。 生产规则部分定义生产该物资需要的原料 & 各原料需要的数量。对于有多规格的物资，生产规则实际定义了一组sku的原料以及原料用量新建生产规则的需要定义的信息包括：      *产量：必填，定义此生产规则可以产生多少产物       *生产规则名称，必填，文本，不得超过20个字符，不可为空      *公开性：必填，可选择公开、私密、选择性公开；选择性公开中可以选择盟内公开、事务内公开和自定义（此部分复用发布的公开性）；公开性影响 1、可见性，未对其公开的角色不可查看；2、复用。未对其公开的事务复用模板时不可复用该生产规则；复用模板见文档下文。 若物资模板为私密，则该物资下的所有生产规则都不能为公开或部分公开。      //tbd：公开性带来的复杂度成指数上升，在系统物资模块目前的使用状态下，成本大于收益，此处可以考虑简化      对应的规格值： 即此生产规则所对应的sku，要求每个规格名下选定一个规格值         *原料表：一组原料和原料的用量，不超过30种。原料即除产物本身的其他物资模板的sku。选择原料需要支持关键字搜索，搜索范围包括： 盟内已有的物资模板、盟外公开的物资模板。在原料有规格的情况下，选定原料时需要指定到该原料的规格      在生产规则的配置中，有必要表示规格和规格之间的关系，举例：某种物资有三种规格，分量：大/中/小， 口味：甜/辣， 做法：清蒸/红烧，甜的规格需要增加糖的原料，同时对于大/中/小份的规格，所用的糖的份量有所不同 从系统已有模板创建：除直接从头创建一个物资模板外，支持从系统中选取一个已经存在的物资模板为基础进行重新创建。可以理解为从系统中搜索一个差不多的模板，以此为基础改一改变成自己的模板  1、搜索已有物资模板的方式：关键字搜索，搜索范围包括：本盟创建的所有物资模板（不包括失效的物资模板）、盟外的公开的物资模板。搜索后可查看基础信息（即除了生产规则之外的信息）  2、在确定要复用的物资模板的基础上，支持对复用的物资模板的所有基础信息进行变更，字段的规范以及约束和直接新建模板保持一致3、修改后创建新的物资模板，新物资模板归属为当前盟。4、除复制外，通过关键词搜索到的盟外物资模板，可以通过申请授权或者直接购买的方式直接获得盟外模板的使用权。对于没有定价的物资模块，需要申请授权，对于定价的物资模板，支付定价获得使用权    创建物资模板的审批：      事务下的物资高级权限可以创建物资模板，根据审批配置发送给审批者（此处需要加创建物资模板的审批配置），审批者可查看物资模板的内容，审批成功后即创建物资模板成功。物资模板的编辑与失效：  4.2 库存相关物资库中记录了事务下的物料/产品库存，并支持相关角色对物料/产品的库存进行操作和管理。在物资模板进行规格化后，物资的库存部分需要进行相应调整。4.2.1 仓库调整 1、去除事务下的全网公开库和盟内公开库。考虑创建事务时会默认创建三个物资库，全网公开库、盟内公开库，目前三个库在系统中几乎没有用户使用（基本会根据需要自定义库），且目前产品主要通过服务进行交易或者转移，全网公开库和盟内公开库存在的意义不大，反而会带来冗余，因此考虑去除全网公开物资库和盟内公开物资库。2、物资库的公开性问题。似乎也没有存在的必要，考虑去除。4.2.2 库存操作直接登记产品     系统支持两种直接登记物资的方式：直接在已有库存中追加物资，或者在没有库存情况下选择物资模板进行入库登记。     登记物资需要输入的信息包括：        入库商品的物资模板(spu)，对于追加库存的登记，物资模板即需要追加的商品；支持全网搜索公开的物资模板进行登记入库。        商品规格：即登记入库时需要确定该批次对应的sku        入库数量：支持到小数点后两位             入库总价：即这批入库单品的总价，支持到小数点后两位，便于计算物料成本和做销售定价参考。        所在位置：这批物料所在的位置卡片，选择范围为事务下管理的位置卡片        备注：文本，对入库物料批次的简单备注说明，不超过200个字符 核销、报废、拆分：这三个操作只能针对已经有库存的物料进行操作，此部分需求不做变更。生产产品    约束和限制：     只能生产本盟所有的物资和被授权的物资     暂不支持一次选定多个spu进行生产，但可以支持一次选择多个sku进行生产    与登记产品类似，支持两种方式，对于有库存的产品，可以直接进行生产；在没有库存的情况下，可以选择盟内的物资模板进行生产。          生产时需要输入的信息字段包括：     物资模板 & 规格：即确定要生产的sku。支持一次生产一个spu下的多个sku     产量：即指定需要生产多少。在生产多sku的情况下，支持为不同的sku确定对应的产量     生产规则：选用具体的生产规则，没有生产规则的情况下，不可直接生产      在产物、产量以及生产规则确定后，系统需要自动计算出需要消耗的原材料，并按先进先出的原则消耗原材料批次，同时支持用户调整需消耗的原材料批次。在原材料不足的情况下不可执行生产，并需要做提醒，提醒信息见原型图。     负责人：需要指定本次生产的负责人，选择范围为当前事务下的所有角色。发起生产后，负责人会收到生产任务，同时系统锁定本次生产的原料。在负责人点击提交生产任务时，系统生成产物并入库，同时消耗原材料。  4.2.3 库存展示：   单个库的库存概览      提供两种展示视图：缩略（卡片）视图和列表视图。      卡片视图展示的内容包括：      物资模板主图、物资模版名称、规格以及规格值、库存量、评价数&评价详情、   入库均价以及入库价格走势                       库存详情展示，展示信息包括：            库存批次总量、锁定量、入库时间、库存id、规格值（即表明是哪个sku的库存）、入库总价/单价、所在位置（即登记时选择的位置卡片），备注信息。      4.2.4 库存记录 & 动态物资模板进行规格化重构后，系统中会存在四种粒度的物资动态记录，包括1、事务物资模块整体动态记录   2、单个物资库动态记录     3、单个物资库下单个spu动态记录：4、单个库存批次动态记录对于这4中物资动态记录，在记录信息中需要增加规格信息，以单个库的物资记录为例，需要增加规格字段，其他几种记录类似，此处文档篇幅所限，不做赘述。 4.3  关联需求变更：4.3.1 商品相关服务上架商品：整体逻辑和原来并无太大变更，即确定上架时间、上架产品以及上架数量。在有规格的情况下，可以支持按规格上架和按总量上架。上架时商品的筛选和查找和搜索：     确定前台维度，前台维度确定可查看分组下的物资模板，选择相应的物资模板后确定上架数量和出品库（出品库决定物资从哪个库出库）；对于没有定价的物资可以直接定价；选择出品库时可查看库存； 支持套餐和单品的筛选；支持物资名的搜索；对于套餐的上架，不需要选择出品库    按规格上架 & 按总量上架：    对于有多个sku的产品，可以分规格上架，即确定每种规格的各自上架数量；同时支持按总量上架，即所有sku共享上架数量。    对于按规格上架的物资，如果该规格已经无法销售（即售出量 + 锁定量）=  出品量，则用户无法选择该规格；对于按总量上架的物资，只要所有规格的售出量+锁定量 < 出品量，则所有的规格都可以销售，直至所有的规格售出量 +锁定量 = 出品量         切换生产规则：  上架后可以切换生产规则，同时确定生产规则的负责人。注：现有的生产规则，实际上定义了一个spu下多个sku生产规则。因此在上架切换规则时，分以下几种情况：   1、有sku，只可在spu层进行生产规则的切换；   2、没有sku，等同于只有一个sku的spu，也只能在spu层进行生产规则的切换；   3、套餐，较为特殊，套餐下的单品是sku，可以切换生产规则。此处要注意可能某一个生产规则没有包含该规格的原料，此种情况系统支持选择，只是生产时不做库存的扣减定价  规格化重构后，需要更新对有规格的物资的定价方式。对于有规格的物资，在服务的定价模块，套餐4.3.2 相关服务的菜单页和订单页          对于有规格的商品，需要在菜单页面提供规格选择，同时体现在订单页面以及线下纸质订单（小票）美团外卖菜单页 & 订单页以供参考：   4.3.2 交易记录物资交易详情记录中需要增加规格信息 4.3.3 出品计划&采购                 
服务订单无法查看列表中的物资详情: 规划：本阶段实现在订单列表查看物资详情，详情页样式同当前菜单页的样式；第二阶段：允许在订单列表查看物资详情时能下单。需求：目前只在点餐页面查看物资详情时允许加入订单，其他页面不允许加入订单页面样式同当前菜单页的物资详情    
【物资库】物资库-入库单价紧急修复: 场景：当前使用中，物资大多数的单位为：g，很多时候价格可能需要到小数点后5位，当前需求不满足【需求变更】登记物资时，用户可以选择登记总价或者单价，系统自动计算另一个价格。在查看实例详情时，同时显示两个价格：总价和单价。关于物资库-登记物资-入库单价保留小数的问题：在用户填大于0的整数、小数点后一位或者两位时，入库单价显示为小数点后两位；在用户填写小数点后多位时（最多5位），保留用户的输入数据，不进行四舍五入。【设计图】  需要调整显示的地方 1.物资库存 2.物资动态 3.物资价格变动 物资单价前端对小数点后面做优化 如果两位能显示下就用两位，否则五位物资总价：始终保持两位小数
物资模板 & 生产关系v2: 需求背景 & 目标目前的物资模型不能有效支持供需匹配，同时对生产规则配置的灵活性支持不足。通过重构提高物资模块功能的可用性。 影响范围物资模块：物资模板 物资库 采购模块： 采购服务 供需发布 服务：上架 定价 套餐需求描述物资模板相关物资模板是对物料的定义，是一组描述某样物资的数据集物资模板维护入口：物资模板维护提高到和事务物资库并列的层级，事务下资源-->物资-->管理物资模板
  
 在管理物资模板的模块，可以进行新建物资模板的操作。有两种方式新建物资，直接新建或在现有的物资模板上新建直接新建需要输入的信息包括：基础信息部分：主图，非必填，同目前新建物资模板上传主图的需求 *名称（必填），支持中英文，不超过64字符；同一个事务下创建的模板名称不可相同别名：支持中英文，规则与约束与系统现行保持一致*单位：必填，系统预置单位选择的范围，用户从系统预置中选择一个计量单位。预置的单位选择范围同目前物资模板的单位选择范围*建议零售价：必填，大于0，支持到小数点后两位，小于等于integer.max*分类，必填，需要支持即时搜索，即用户在输入分类时自动根据关键词推荐全网已有的分类名称，按匹配度由高到低排序；无搜索结果时，系统在该模版创建成功时自动新建用户输入的分类；分类名称不超过8个字符。属性及属性值：一组描述该物资模板的key-value，一个key-value包括：     属性名称：即key，支持中英文，不超过8个字符     属性值：即value，包括文本属性值和统计属性值，区别在于定义属性值时选不选单位；对于文本属 
       性值，不得超过20个字符；对于统计属性值，支持的单位范围和目前系统保持一 致，同时输入的 
         属性值只能为数字，数字不得超过float.max一个物资模板最多支持20个key-value的添加时间管理器：与物资模板现有的添加时间管理器需求保持一致 *是否公开：默认打开，打开后全网即可搜索并使用该模板，模版的公开性不区分盟内盟外。如何使用其他事务创建的物资模板见文档下文标签（非必填），可在模板中添加多个标签，同目前物资模板的添加标签功能 物资详情部分：对物资模板的图文描述一段富文本，富文本的功能、约束和限制与系统目前的普通发布富文本保持一致。  
 生产规则：定义生产该物资需要的原料 & 各原料需要的数量。新建生产规则的需要定义的信息包括：       *产量：必填，定义此生产规则可以产生多少产物        *生产规则名称，必填，文本，不得超过20个字符，不可为空       *公开性：必填，可选择公开、私密、选择性公开；选择性公开中可以选择盟内公开、事务内公开和自定义（此部分复用发布的公开性）；公开性影响 1、可见性，未对其公开的角色不可查看；2、复用。未对其公开的事务复用模板时不可复用该生产规则；复用模板见文档下文。 若物资模板为私密，则该物资下的所有生产规则都不能为公开或部分公开。       //tbd：公开性带来的复杂度成指数上升，在系统物资模块目前的使用状态下，成本大于收益，此处可以考虑简化         *原料表：一组原料和原料的用量，不超过30种。原料即其他物资模板（排除产物本身），选择原料需要支持关键字搜索，搜索范围包括：本事务维护的物资模板，盟内其他事务创建的公开的模板，盟外其他事务创建的公开的模板;若生产规则的公开性为公开或者部分公开，则选取本事务的模板时，也要求该选取的模板为公开；若生产规则为私密生产规则（可理解为秘方），则可以选取本事务下的公开性为私密的物资模板，若原料表中存在私密的物资模板，则该生产规则不可调整为公开或部分公开。原料用量为数值，支持到小数点后两位，大于0。 生产方式：非必填，文本，不超过500字符是否同步生成拆解规则：在新建生产规则时可以选择是否生成对应的拆解规则，拆解规则见下文约束与限制： 支持一个产物配置多条生产规则，但不可超过20条。同一物资模板下的生产规则不可重复。名称相同或原料组成和单位量都相同的生产规则认为是相同的生产规则  
 拆解规则，表明某个物资模板可以拆解出哪些物资，可以理解为生产规则的反向产物。      创建拆解规则时需要定义的信息同创建生产规则时保持一致；      同时支持从已有的生产规则直接逆向生成拆解规则 从系统已有模板创建：除直接从头创建一个物资模板外，支持从系统中选取一个已经存在的物资模板为基础进行重新创建。可以理解为从系统中搜索一个差不多的模板，以此为基础改一改变成自己的模板   1、搜索已有物资模板的方式：关键字搜索，搜索范围包括：当前事务下创建的所有物资模板（不包括失效的物资模板）、盟内和盟外的公开的物资模板。   2、在确定要复用的物资模板的基础上，支持对复用的物资模板的所有信息进行变更，字段的规范以及约束和直接新建模板保持一致3、修改后创建新的物资模板，新物资模板归属为当前事务。同时支持直接添加进当前事务的物资清单，注意直接添加进当前事务的物资清单不改变物资模板的归属。 
  
    
 物资模板的查看、失效与更新：物资模板列表展示的信息包括：主图、物资模板名称、所属事务名称（如果是本事务创建的物资模板，则直接展示“本事务”，如果是从盟内事务直接添加的物资模板，则显示盟内事务名称，如果是从盟外添加的物资模板，则显示盟名称 -事务名称）、分类、最后修改时间（时间显示规则同发布的更新时间显示规则）。 对于从盟内/盟外直接添加的物资模板，需要展示是否可更新（不要求实时更新，只要求刷新后可见）列表排序规则：首先按本事务维护的物资模板（所谓本事务维护的物资模板，包括本事务从零创建的物资模板和以系统现有模板为基础创建的模板）、从盟内直接添加到本事务的物资模板、从盟外直接添加到本事务的物资模板分组排列，每个分组中按拼音顺序排列需要支持关键字搜索查找  
 从物资模板列表可以查看某个物资模板的详细信息，详细信息包括基本属性、图文详情、生产规则和 拆解规则，与创建时需要输入的信息保持一致 
 物资模板的修改：修改物资模板的条件： 该模板为本事务维护的模板若该物资模板没有被复用且没有产生过实例（登记或生产），则可以更新全部信息；若该物资模板被复用或者产生过实例，其支持编辑的信息以及编辑后的关联影响有：主图：可以更换主图或者直接删除主图名称、分类、单位、属性组不可编辑建议零售价支持编辑，规则与约束见上文创建物资模板的定义别名支持编辑和删除，规则与约束见上文创建物资模板的定义标签支持增删是否公开：可以从私密调整为公开，不可从公开调整为私密 
 
   
 
 
【物资库】- 库存波次与实例优化: 可数与不可数定义：     根据物资模板中的单位定义来表示该物资是否可数      可数单位：份、套、件、枚、盒、只等单位      不可数单位：标准度量衡单位，如长度单位米、千米、厘米，重量级单位克、千克、吨，面积单位平方米、平方千米，体积单位：立方米、毫升等      *以上未做穷尽枚举影响范围：库存操作：登记入库、核销报废、拆分库存转移：获取物资、租用物资记录信息：物资历史动态需求描述 低保真原型  
物资库名称与资金、文件库保持一致: 当前的情况：物资库名称目前显示为仓库，和资金、文件库不一致解决方案：物资库的文案更改：四个默认创建的库名为事务名+全网公开物资库事务名+盟内公开物资库事务名+事务公开物资库角色+担任者的物资库自己创建的物资库名为用户填写的名称，不加后缀   
物资库需求第二阶段迭代范围: 新增单位：双、份、碗、枚、盘、盆、锅，需求见物资入库1.1 编辑物资信息1.1 变更内容：重新定义编辑物资的权限物资评论1.1 变更内容：考虑与发布评论一起梳理查看物资信息v1.1 变更内容：新增“物资物资模板”的需求仓库动态v1.1 变更内容：补充了复合物资/生产损耗/锁定中的动态记录；增加了统计功能获取或接收同名物资时，物资入库，名称和叠加到哪个卡片上的问题统一补充物资库在什么时候会有消息通知的文档生产完成后，补充生产信息的流程，在忙碌的生产过程中，有点不合理生产规则上，需要配上具体的生产负责人跨库生产的需求价格的梳理，需求文档明确物资库每一处价格的定义发送物资，若无权限发送物资，但接收到了审批，该怎么办获取物资的需求优化：获取物资审批及同意后，现在是立即发送物资（场景：商家看见审批后，不立即处理，等在现实生活中，发送完物资后，再处理这个消息）申请物资时，用户在当前库中申请的话，发送来的物资应该推荐用户放入申请时的物资库。时间管理器/报警的功能补充新功能：位置管理库
【物资库】- 库存波次与实例优化: 可数与不可数定义：     根据物资模板中的单位定义来表示该物资是否可数      可数单位：份、套、件、枚、盒、只等单位      不可数单位：标准度量衡单位，如长度单位米、千米、厘米，重量级单位克、千克、吨，面积单位平方米、平方千米，体积单位：立方米、毫升等      *以上未做穷尽枚举影响范围：库存操作：登记入库、核销报废、拆分库存转移：获取物资、租用物资记录信息：物资历史动态需求描述 
【物资库】复合物资模板编辑的需求: 1. 背景：在整理物资模板的需求时，遗漏了复合物资模板的编辑需求。2. 功能说明：2.1功能简述：编辑复合物资模板。用户故事：管理者编辑复合物资模板，可以根据复合物资是否打包过实例，编辑的范围有差异。功能详述：优先级：高平台：WEB、移动端。描述：编辑的权限：同普通物资的编辑权限没有打包过实例的复合物资可编辑以下内容：名称、单位、构成、参数、描述 打包过实例的复合物资不可编辑以下内容：名称、单位、构成（这是为了运营需要临时的需求，等物资模板的版本迭代需求出来后，再考虑正式的需求）  移动端视觉  web视觉   u
物资库竞品调研 & 分析: 物资库应当提供的基础能力：     商品管理和库存管理，为采购和物资获取提供支持     商品管理：物资基本信息维护     库存管理：位置管理、分仓管理、调度管理、物资实例管理市面上现有解决方案的调研：电商后台商品管理解决方案   类目 + 属性进行商品管理：       商品（物资）的基本概念：            sku（stock keeping unit）：最小库存单位，库存控制的最小可用单位，仓库管理、采购管理、库存管理等都是以sku为记录单元，如"iphone 7 plus 128g 银色"，目前物资库中的物资模板约等于sku的概念            spu(standard product unit): 标准化产品单元。如 "iphone 7 plus"是一个spu            类目：分类层级，分为前台类目和后台类目，前台类目是给消费者看的类目；后台类目属于基础数据，不可随意变动。在物资库中添加sku（物资模板）必须进行绑定                        属性：属性可做分类，包括关键属性、销售属性、非销售属性等。关键属性是能够唯一确定产品的属性；销售属性是组成sku的特殊属性，如手机的"颜色"、"内存"等。      类目管理和品牌管理            供应链和平台商家更好的发布和管理商品。            标准化商品            有利于仓库管理            科学的物资类目管理有利于商家运营的管理工作        后台类目             不会轻易修改和删除；主要面向平台商家，主要用于管理商品和属性；一般3到4层；商品（sku）必须挂载在叶子类目下             各电商可能会有自己的分类标准，也可采用国家推荐分类标准        前台类目              支持多平台设置；支持平台商家自定义店铺前台类目              和后台的类目 + 属性关联，自由组合，动态调整。        品牌管理             品牌：logo、中英文名、产地       属性管理             属性分类：关键属性：能够确认唯一"产品"的属性，可以是一个或多个属性的集合；销售属性（规格属性）：组成sku的特殊属性；非关键属性：除关键属性和销售属性外的其他属性；商品属性：表示商品的特有特征           【属性系统】   属性是一对kv值，挂载在类目下，支持编辑，即定义当前的分类具有哪些属性，下级分类可以的继承上级属性。对于具有很多属性的商品，需要把多个属性分为一组。       sku & spu管理             spu可以由多个sku构成，一个sku也可能出现在不同的spu中             组合sku，sku3在前台售卖是一个商品，下单之后流出仓库就解析成sku1和sku2。同时存在入库就是套装的情况             通过销售属性关联sku和spu，同一spu在前台显示时可以共用同一商品详情，通过规格属性映射到具体的sku       商品管理：             上下架管理：商品可进行批量上下架；可设置自动下架规则；新品上架可定时发布             库存管理：同步仓库的库存或自设库存      商品搜索 & 筛选：依据关键词搜索，在搜索结果中支持属性筛选                     商用wms系统解决方案      电商后台        库存分层：销售层、调度层、仓库层           销售层：面对前端用户，通常和实物库存保持一致，在预售场景下可以与库存不一致                    可售库存、锁定库存、已销售库存、销售库存、预售库存           调度层：分配中心，将订单转化为发货单，按照调度规则决定哪些sku由那个仓库发货                     账面库存、可用库存、在途库存、盘损库存、已用库存           仓库层：可用库存、锁定库存、已出库库存、不可用库存            注：销售层、调度层、仓库层只是逻辑上的分类      销售库存：允许超卖、做预售、不同活动独占库存、不同渠道分配库存       库存调度：             主要考虑因素：物流时效、仓库等级、业务需求             库存调度规则：依业务场景而定      库存控制策略：           需求预测：数量、时间、频率、范围、可预测性五个因素；定性预测和定量预测两种方法   超级账号物资库现有领域模型： 目前的领域模型存在的问题：1、在供需匹配场景下，无法确定供方和需方的物资模板是否是同一件物资。       如需求方物资库里建立了“上海青菜”模板，无属性；供给方物资库中建立了“青菜”模板，属性名为产地，属性值为上海。实际上这两种物资模板是一样的，但是系统无法识别（模板id不同、名称不同、属性不同）。2、无法采用盟外模板，后续在企业用户较多且物资库使用较多的情况下，会存在大量名称、属性不同但实际上是同一种物资的模板重构优化方向：1、全网物资标准化。统一维护一套全网“类目 + 属性”系统，维护各个类目下物资的属性集，并规定规格属性；各个事务物资库新建物资模板时必须关联标准类目，并细化该类目下的属性值。       类目 + 属性 ：物资分类树 + 叶节点的属性名称       物资模板：关联的类目 + 具体的属性值。即sku问题：在何处维护？由谁维护？2、物资模板可复用。支持全网搜索物资模板进行复用    问题：如何跟踪变更3、复合物资？参考资料《电商后台系统产品逻辑全解析》《淘宝十年产品事》c-wms微仓vwms唯智wms科箭wms云京东云仓wms
物资库-会话中的发送物资: 背景：会话中在进行发送物资操作时，发送方/接收方/会话中的其余成员会看到不同的文案，但需求没有梳理。目标：梳理会话中的发送物资文案需求：会话中发送物资文案的需求见  发送物资时，备注由“可选”，变为“默认“发送一批物资””
衣食住行-获取物资时显示生产规则和物资动态: 1.目标：将物资模板上的信息以c端视角展示。2.功能：2.1功能名称：点餐时查看商品详情用户故事：顾客在点餐时，希望能查看商品详情，以便了解更多关于本商品的信息。功能详述：优先级：高平台：web、移动描述：   2.2功能名称：上菜后查看商品详情用户故事：顾客上菜后，可以查看商品详情，以便对该商品进行溯源。功能详述：优先级：高平台：web、移动描述： 套餐的解决方案（新版物资库没有套餐后，不考虑这个需求。如果在新版物资库上线前要做这个需求的话，套餐的解决方案如下）  
【需求获取】2018年10月10日物资、财务报表需求获取: 会议时间：2018年10月10日16:10-17:10与会者：张丽琴、殷豪、杨维军、杜波、周鹏、方燕玉会议目标：了解物资、财务的报表需求会议内容总结：1. 需求：物资部需要向餐厅提供不同供应商的原材料报价单，以便餐厅在比价、比品质后确定最终的供应商。解决方案：超级账号最终的形态：供应商会在盟客网公开原材料的信息，让需方进行比较。暂时在线下解决这个流程。2. 需求：餐厅需要知道物资部购入原料的成本价。解决方案：当前餐厅没有使用软件，可以以盟内角色的身份加入物资部，查看物资部仓库动态；未来餐厅使用软件后，物资部向餐厅发送物资时，餐厅即能及时知道物资的成本价。3. 需求：物资部需要统计入库物资的总金额，按日期、供应商、单品进行筛选。解决方案：统计总金额、按日期、单品筛选可以在仓库动态中实现。需要进一步探讨的问题：按供应商筛选。有两种方案，方案一，为不使用superID的供应商，我们自己为该供应商创建一个临时的盟，进行物资转移，这样在仓库动态的“来源”字段能筛选供应商。但是，增加了物资部的工作（需要为供应商维护账号），并且在供应商正式入驻superID后也会存在问题。方案二，在录入物资时需要填写可供统计的供应商字段（也就是说，不能用特殊属性，要直接创建一个“供应商”字段），但这并不通用。4. 需求：在交易汇总表中要查看每笔交易对应的物资明细。比如，财务有需要验证每个订单包含多少菜品。 解决方案：加视图。并且考虑开“订单合并视图”。5.需求：财务需要查看餐厅业务有关的统计报表。解决方案：财务部提供的资料见下表。“每月的期间费用”需要用户自己录入。 6.需求：财务需要进行日常财务统计，比如按物资分类进行统计分析，比如统计肉类、蔬菜类的价格浮动。解决方案：分类的需求，在统计模块做。
【已完成】物资库-仓库动态v1.1: 背景阐述：上一版本缺少对于复合物资和用于生产的原料的记录，所以，当前版本完整的记录仓库中各物资的动态实现统计功能：物资部和餐厅需要查看汇总的总金额，能按日期、按单品进行统计具体的需求见  内部评审后的改动： 仓库动态的原型修改内容：新增“物资拆分”“物资退回”的记录明确“仓库动态默认显示当月1日-至今的记录。用户可另行筛选时间。”在物资库-物资总览页面，新增总览仓库动态的需求，并且可以筛选仓库，只查看特定几个仓库的仓库动态
